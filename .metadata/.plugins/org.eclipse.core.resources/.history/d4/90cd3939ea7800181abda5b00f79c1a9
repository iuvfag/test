package com.internousdev.login.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import com.internousdev.login.util.DBConnector;


public class LoginDAO {
	public LoginDTO select(String name, String password)throws SQLExeption{
		//メソッド名は処理内容をわかりやすくするため「select」にする
		LoginDTO dto = new LoginDTO();
		DBConnector db = new DBConnector();
		Connection con = db.getConnection();

		String sql = "select * from uset where user name = ? and password = ?";

		try{
			PreparedStatement ps = con.preparedStatemment(sql);
			ps.setString(1, name);
			ps.setString(2, password);
			ResultSet rs = ps.executeQuery();
			//SQL文の実行

			if(rs.next()){
				dto.setName(rs.getString("user_name"));
				dto.setName(rs.getString("password"));
				//select文で取得した情報をDTOクラスに格納
			}

		}catch(SQLExeption e ){
			e.printStackTrace();
			//処理中にSQL関連のエラーが発生した際に実行する処理
		}finally{
			con.close();
			//DB接続を切断する。必ず実行する処理
		}

		return dto;
	}

}
